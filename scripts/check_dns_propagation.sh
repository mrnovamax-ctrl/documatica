#!/bin/bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è DNS –¥–ª—è oplatanalogov.ru

echo "=== –ü—Ä–æ–≤–µ—Ä–∫–∞ DNS —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è oplatanalogov.ru ==="
echo ""
echo "–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π IP: 37.233.86.187"
echo "–°—Ç–∞—Ä—ã–π IP:     37.140.192.90"
echo ""

# –û—Å–Ω–æ–≤–Ω—ã–µ –ø—É–±–ª–∏—á–Ω—ã–µ DNS
echo "üì° –ü—É–±–ª–∏—á–Ω—ã–µ DNS —Å–µ—Ä–≤–µ—Ä—ã:"
echo "  Google DNS:      $(dig @8.8.8.8 oplatanalogov.ru +short)"
echo "  Cloudflare DNS:  $(dig @1.1.1.1 oplatanalogov.ru +short)"
echo "  OpenDNS:         $(dig @208.67.222.222 oplatanalogov.ru +short)"
echo ""

# –õ–æ–∫–∞–ª—å–Ω—ã–π DNS
echo "üè† –õ–æ–∫–∞–ª—å–Ω—ã–π DNS:"
echo "  –°–∏—Å—Ç–µ–º–∞:         $(dig oplatanalogov.ru +short)"
echo ""

# TTL
echo "‚è±Ô∏è  TTL (–≤—Ä–µ–º—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è):"
dig oplatanalogov.ru | grep -A1 "ANSWER SECTION" | tail -1
echo ""

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –æ–±–æ–∏—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤
echo "üåê –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä–≤–µ—Ä–æ–≤:"
echo -n "  –ù–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä (37.233.86.187): "
curl -s -o /dev/null -w "%{http_code}" http://37.233.86.187:8000 && echo " ‚úÖ —Ä–∞–±–æ—Ç–∞–µ—Ç"

echo -n "  –°—Ç–∞—Ä—ã–π —Å–µ—Ä–≤–µ—Ä (37.140.192.90): "
STATUS=$(curl -s -o /dev/null -w "%{http_code}" http://37.140.192.90 -H "Host: oplatanalogov.ru")
if [ "$STATUS" == "301" ]; then
    echo " ‚úÖ —Ä–µ–¥–∏—Ä–µ–∫—Ç–∏—Ç"
elif [ "$STATUS" == "200" ]; then
    echo " ‚ö†Ô∏è  –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ–Ω—Ç–µ–Ω—Ç (–Ω–µ—Ç —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞)"
else
    echo " ‚ùå –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω"
fi

echo ""
echo "üí° –°–æ–≤–µ—Ç: TTL=300 —Å–µ–∫ –æ–∑–Ω–∞—á–∞–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫—ç—à–∞ –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç"
echo "   –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –æ–±–Ω–æ–≤—è—Ç—Å—è –≤ —Ç–µ—á–µ–Ω–∏–µ 1-4 —á–∞—Å–æ–≤"
