# Documatica — Структура сайта и архитектура

> Документ создан: 19 января 2026
> Версия: 2.0
> Архитектура: FastAPI + Jinja2 SSR

---

## Оглавление

1. [Архитектура проекта](#архитектура-проекта)
2. [Структура URL](#структура-url)
3. [Публичная часть сайта](#публичная-часть-сайта)
4. [Личный кабинет](#личный-кабинет)
5. [Структура файлов](#структура-файлов)
6. [План миграции](#план-миграции)
7. [Приоритеты разработки](#приоритеты-разработки)

---

## Архитектура проекта

### Технологический стек

| Компонент | Технология |
|-----------|------------|
| Backend | FastAPI |
| Шаблонизатор | Jinja2 (SSR) |
| Frontend | Bootstrap (WowDash), Alpine.js/HTMX |
| База данных | PostgreSQL (prod) / SQLite (dev) |
| Кэширование | Redis (опционально) |
| Контент | YAML-файлы |

### Принципы архитектуры

1. **SSR (Server-Side Rendering)** — все страницы рендерятся на сервере
2. **Разделение зон** — публичная часть и личный кабинет
3. **Иерархические URL** — вложенная структура для SEO
4. **Контент через YAML** — SEO-специалист может редактировать без разработчика
5. **Компонентный подход** — переиспользуемые Jinja2-компоненты

### Зоны сайта

| Зона | Префикс URL | Доступ | Назначение |
|------|-------------|--------|------------|
| Публичная | `/` | Все | SEO-лендинги, информация, CTA |
| Личный кабинет | `/dashboard/` | Авторизованные | Генераторы, справочники, документы |
| API | `/api/v1/` | Все/Авторизованные | REST API для AJAX-запросов |

---

## Структура URL

### Правила формирования URL

1. **Иерархическая вложенность**: `/категория/подкатегория/модификатор/`
2. **Trailing slash**: да (для консистентности)
3. **Транслитерация**: латиница, дефисы
4. **Без дублирования**: `/upd/ooo/` вместо `/upd/upd-ooo/`

### Типы страниц

| Тип | Описание | Зона |
|-----|----------|------|
| **Хаб** | Главная страница категории со ссылками на подстраницы | Публичная |
| **Лендинг** | SEO-страница под конкретный запрос с CTA | Публичная |
| **Инфо** | Информационная статья / инструкция | Публичная |
| **Скачивание** | Страница для скачивания бланков | Публичная |
| **Генератор** | Интерактивный конструктор документа | Личный кабинет |

---

## Публичная часть сайта

### 1. Главная страница

| Страница | URL | Тип |
|----------|-----|-----|
| Главная | `/` | Хаб |

---

### 2. УПД и первичные документы

**Приоритет: КРИТИЧЕСКИЙ**

#### 2.1 УПД

| Страница | URL | Тип |
|----------|-----|-----|
| Генератор УПД | `/upd/` | Хаб |
| УПД для ООО | `/upd/ooo/` | Лендинг |
| УПД для ИП | `/upd/ip/` | Лендинг |
| УПД для самозанятых | `/upd/samozanyatye/` | Лендинг |
| УПД с НДС | `/upd/s-nds/` | Лендинг |
| УПД без НДС | `/upd/bez-nds/` | Лендинг |
| УПД на УСН | `/upd/usn/` | Лендинг |
| УПД 2026 — новая форма | `/upd/2026/` | Лендинг |
| УПД статус 1 | `/upd/status-1/` | Инфо |
| УПД статус 2 | `/upd/status-2/` | Инфо |
| УПД XML для ЭДО | `/upd/xml-edo/` | Лендинг |
| Образец заполнения УПД | `/upd/obrazec/` | Инфо |
| Скачать бланк УПД Excel | `/upd/blank-excel/` | Скачивание |
| Скачать бланк УПД Word | `/upd/blank-word/` | Скачивание |
| УПД вместо акта | `/upd/vmesto-akta/` | Инфо |
| Корректировочный УПД | `/upd/korrektirovochnyj/` | Лендинг |
| Исправленный УПД | `/upd/ispravlennyj/` | Лендинг |

#### 2.2 Счет на оплату

| Страница | URL | Тип |
|----------|-----|-----|
| Счет на оплату | `/schet/` | Хаб |
| Счет для ИП | `/schet/ip/` | Лендинг |
| Счет для ООО | `/schet/ooo/` | Лендинг |
| Счет от самозанятого | `/schet/samozanyatye/` | Лендинг |
| Счет с НДС | `/schet/s-nds/` | Лендинг |
| Счет без НДС | `/schet/bez-nds/` | Лендинг |
| Счет с QR-кодом | `/schet/qr-kod/` | Лендинг |
| Образец счета | `/schet/obrazec/` | Инфо |
| Скачать бланк Excel | `/schet/blank-excel/` | Скачивание |

#### 2.3 Счет-фактура

| Страница | URL | Тип |
|----------|-----|-----|
| Счет-фактура | `/schet-faktura/` | Хаб |
| Счет-фактура для УСН | `/schet-faktura/usn/` | Инфо |
| Корректировочный счет-фактура | `/schet-faktura/korrektirovochnyj/` | Лендинг |
| Образец счет-фактуры | `/schet-faktura/obrazec/` | Инфо |

#### 2.4 Товарная накладная

| Страница | URL | Тип |
|----------|-----|-----|
| Товарная накладная | `/tovarnaya-nakladnaya/` | Хаб |
| ТОРГ-12 | `/tovarnaya-nakladnaya/torg-12/` | Лендинг |
| Образец ТОРГ-12 | `/tovarnaya-nakladnaya/obrazec/` | Инфо |
| Скачать бланк | `/tovarnaya-nakladnaya/blank/` | Скачивание |

#### 2.5 Акт выполненных работ

| Страница | URL | Тип |
|----------|-----|-----|
| Акт выполненных работ | `/akt/` | Хаб |
| Акт оказания услуг | `/akt/okazaniya-uslug/` | Лендинг |
| Акт для самозанятого | `/akt/samozanyatye/` | Лендинг |
| Акт приемки от самозанятого | `/akt/priemki-ot-samozanyatogo/` | Инфо |
| Образец акта | `/akt/obrazec/` | Инфо |

#### 2.6 Акт сверки

| Страница | URL | Тип |
|----------|-----|-----|
| Акт сверки взаиморасчетов | `/akt-sverki/` | Хаб |
| Образец акта сверки | `/akt-sverki/obrazec/` | Инфо |
| Что делать при расхождениях | `/akt-sverki/rashozhdeniya/` | Инфо |

---

### 3. Договоры

**Приоритет: ВЫСОКИЙ**

#### 3.1 Хаб договоров

| Страница | URL | Тип |
|----------|-----|-----|
| Все договоры | `/dogovor/` | Хаб |

#### 3.2 Договор оказания услуг

| Страница | URL | Тип |
|----------|-----|-----|
| Договор оказания услуг | `/dogovor/okazaniya-uslug/` | Хаб |
| Договор услуг для ИП | `/dogovor/okazaniya-uslug/ip/` | Лендинг |
| Договор услуг для ООО | `/dogovor/okazaniya-uslug/ooo/` | Лендинг |
| Договор услуг с самозанятым | `/dogovor/okazaniya-uslug/samozanyatye/` | Лендинг |
| Образец договора услуг | `/dogovor/okazaniya-uslug/obrazec/` | Инфо |

#### 3.3 Договор подряда

| Страница | URL | Тип |
|----------|-----|-----|
| Договор подряда | `/dogovor/podryada/` | Хаб |
| Образец договора подряда | `/dogovor/podryada/obrazec/` | Инфо |
| Отличие от договора услуг | `/dogovor/podryada/otlichie-ot-uslug/` | Инфо |

#### 3.4 Договор поставки

| Страница | URL | Тип |
|----------|-----|-----|
| Договор поставки | `/dogovor/postavki/` | Хаб |
| Образец договора поставки | `/dogovor/postavki/obrazec/` | Инфо |

#### 3.5 Договор аренды

| Страница | URL | Тип |
|----------|-----|-----|
| Договор аренды | `/dogovor/arendy/` | Хаб |
| Договор аренды помещения | `/dogovor/arendy/pomescheniya/` | Лендинг |
| Договор аренды оборудования | `/dogovor/arendy/oborudovaniya/` | Лендинг |
| Образец договора аренды | `/dogovor/arendy/obrazec/` | Инфо |

#### 3.6 Договор купли-продажи

| Страница | URL | Тип |
|----------|-----|-----|
| Договор купли-продажи | `/dogovor/kupli-prodazhi/` | Хаб |
| Образец | `/dogovor/kupli-prodazhi/obrazec/` | Инфо |

#### 3.7 NDA

| Страница | URL | Тип |
|----------|-----|-----|
| NDA (соглашение о конфиденциальности) | `/dogovor/nda/` | Хаб |
| NDA для ИП | `/dogovor/nda/ip/` | Лендинг |
| Юридическая сила NDA | `/dogovor/nda/yuridicheskaya-sila/` | Инфо |
| Штрафы за разглашение | `/dogovor/nda/shtrafy/` | Инфо |

#### 3.8 Договор с самозанятым

| Страница | URL | Тип |
|----------|-----|-----|
| Договор с самозанятым | `/dogovor/s-samozanyatym/` | Хаб |
| Образец договора | `/dogovor/s-samozanyatym/obrazec/` | Инфо |
| Нужен ли договор с самозанятым | `/dogovor/s-samozanyatym/nuzhen-li/` | Инфо |
| ГПХ с самозанятым | `/dogovor/s-samozanyatym/gph/` | Лендинг |

#### 3.9 Другие договоры

| Страница | URL | Тип |
|----------|-----|-----|
| Агентский договор | `/dogovor/agentskij/` | Хаб |
| Лицензионный договор | `/dogovor/licenzionnyj/` | Хаб |
| Договор оферты | `/dogovor/oferty/` | Хаб |
| Договор займа | `/dogovor/zajma/` | Хаб |
| Договор комиссии | `/dogovor/komissii/` | Хаб |
| Договор хранения | `/dogovor/hraneniya/` | Хаб |
| Франчайзинговый договор | `/dogovor/franchajzingovyj/` | Хаб |
| Счет-договор | `/dogovor/schet-dogovor/` | Хаб |

---

### 4. Кадровые документы

**Приоритет: ВЫСОКИЙ**

| Страница | URL | Тип |
|----------|-----|-----|
| Кадровые документы | `/kadry/` | Хаб |

#### 4.1 Трудовой договор

| Страница | URL | Тип |
|----------|-----|-----|
| Трудовой договор | `/kadry/trudovoj-dogovor/` | Хаб |
| Трудовой договор для ИП | `/kadry/trudovoj-dogovor/ip/` | Лендинг |
| Отличие от ГПХ | `/kadry/trudovoj-dogovor/otlichie-ot-gph/` | Инфо |
| Образец трудового договора | `/kadry/trudovoj-dogovor/obrazec/` | Инфо |

#### 4.2 ГПХ

| Страница | URL | Тип |
|----------|-----|-----|
| ГПХ | `/kadry/gph/` | Хаб |
| ГПХ что это | `/kadry/gph/chto-eto/` | Инфо |
| ГПХ налоги и взносы | `/kadry/gph/nalogi-vznosy/` | Инфо |
| Образец ГПХ | `/kadry/gph/obrazec/` | Инфо |

#### 4.3 Приказы

| Страница | URL | Тип |
|----------|-----|-----|
| Приказы | `/kadry/prikazy/` | Хаб |
| Приказ о приеме (Т-1) | `/kadry/prikazy/o-prieme/` | Лендинг |
| Приказ об увольнении (Т-8) | `/kadry/prikazy/ob-uvolnenii/` | Лендинг |
| Приказ о переводе | `/kadry/prikazy/o-perevode/` | Лендинг |
| Приказ об отпуске | `/kadry/prikazy/ob-otpuske/` | Лендинг |
| Приказ о премировании | `/kadry/prikazy/o-premirovanii/` | Лендинг |

#### 4.4 Табели и расписания

| Страница | URL | Тип |
|----------|-----|-----|
| Штатное расписание (Т-3) | `/kadry/shtatnoe-raspisanie/` | Хаб |
| Табель учета времени (Т-13) | `/kadry/tabel/` | Хаб |
| График отпусков | `/kadry/grafik-otpuskov/` | Хаб |
| Должностная инструкция | `/kadry/dolzhnostnaya-instrukciya/` | Хаб |
| Личная карточка Т-2 | `/kadry/lichnaya-kartochka-t2/` | Хаб |

#### 4.5 Положения

| Страница | URL | Тип |
|----------|-----|-----|
| Положение об оплате труда | `/kadry/polozhenie-ob-oplate-truda/` | Хаб |
| Положение о премировании | `/kadry/polozhenie-o-premirovanii/` | Хаб |

---

### 5. Бухгалтерия и учет

**Приоритет: ВЫСОКИЙ**

| Страница | URL | Тип |
|----------|-----|-----|
| Бухгалтерские документы | `/buhgalteriya/` | Хаб |

#### 5.1 КУДиР

| Страница | URL | Тип |
|----------|-----|-----|
| КУДиР | `/buhgalteriya/kudir/` | Хаб |
| КУДиР для УСН Доходы | `/buhgalteriya/kudir/usn-dohody/` | Лендинг |
| КУДиР для УСН Доходы-Расходы | `/buhgalteriya/kudir/usn-dohody-rashody/` | Лендинг |
| Как заполнить КУДиР | `/buhgalteriya/kudir/kak-zapolnit/` | Инфо |
| КУДиР что это | `/buhgalteriya/kudir/chto-eto/` | Инфо |
| Скачать бланк КУДиР | `/buhgalteriya/kudir/blank/` | Скачивание |

#### 5.2 Кассовые документы

| Страница | URL | Тип |
|----------|-----|-----|
| Кассовые документы | `/buhgalteriya/kassa/` | Хаб |
| Кассовая книга | `/buhgalteriya/kassa/kassovaya-kniga/` | Лендинг |
| ПКО | `/buhgalteriya/kassa/pko/` | Лендинг |
| РКО | `/buhgalteriya/kassa/rko/` | Лендинг |
| Авансовый отчет | `/buhgalteriya/avansovyj-otchet/` | Хаб |

#### 5.3 Другие

| Страница | URL | Тип |
|----------|-----|-----|
| Оборотно-сальдовая ведомость | `/buhgalteriya/oborotka/` | Хаб |
| Товарный отчет | `/buhgalteriya/tovarnyj-otchet/` | Хаб |

---

### 6. Налоговые документы

**Приоритет: ВЫСОКИЙ**

| Страница | URL | Тип |
|----------|-----|-----|
| Документы для ФНС | `/nalogovaya/` | Хаб |

#### 6.1 Письма в ФНС

| Страница | URL | Тип |
|----------|-----|-----|
| Письмо в налоговую | `/nalogovaya/pismo/` | Хаб |
| Пояснения в налоговую | `/nalogovaya/poyasneniya/` | Лендинг |
| Пояснения по расхождениям | `/nalogovaya/poyasneniya/rashozhdeniya/` | Лендинг |
| Возражение на требование ФНС | `/nalogovaya/vozrazhenie/` | Лендинг |
| Сопроводительное письмо | `/nalogovaya/soprovoditelnoe-pismo/` | Лендинг |
| Уведомление в ФНС | `/nalogovaya/uvedomlenie/` | Лендинг |

#### 6.2 Заявления

| Страница | URL | Тип |
|----------|-----|-----|
| Заявления в ФНС | `/nalogovaya/zayavlenie/` | Хаб |
| Заявление на возврат переплаты | `/nalogovaya/zayavlenie/vozvrat/` | Лендинг |
| Заявление на зачет переплаты | `/nalogovaya/zayavlenie/zachet/` | Лендинг |
| Заявление на уточнение платежа | `/nalogovaya/zayavlenie/utochnenie/` | Лендинг |

---

### 7. Самозанятые

**Приоритет: ВЫСОКИЙ**

| Страница | URL | Тип |
|----------|-----|-----|
| Работа с самозанятыми | `/samozanyatye/` | Хаб |
| Договор с самозанятым | `/samozanyatye/dogovor/` | Лендинг |
| Акт для самозанятого | `/samozanyatye/akt/` | Лендинг |
| Счет от самозанятого | `/samozanyatye/schet/` | Лендинг |
| Чек самозанятого | `/samozanyatye/chek/` | Инфо |
| Проверить чек | `/samozanyatye/chek/proverit/` | Инструмент |
| Заявление на возврат НПД | `/samozanyatye/vozvrat-npd/` | Лендинг |
| Риски работы с самозанятыми | `/samozanyatye/riski/` | Инфо |

---

### 8. Регистрация бизнеса

**Приоритет: СРЕДНИЙ**

| Страница | URL | Тип |
|----------|-----|-----|
| Регистрация бизнеса | `/registraciya/` | Хаб |

#### 8.1 Регистрация ИП

| Страница | URL | Тип |
|----------|-----|-----|
| Как открыть ИП 2026 | `/registraciya/ip/` | Хаб |
| Заявление Р21001 | `/registraciya/ip/r21001/` | Лендинг |
| Р21001 образец | `/registraciya/ip/r21001/obrazec/` | Инфо |
| Документы для регистрации ИП | `/registraciya/ip/dokumenty/` | Инфо |
| Закрытие ИП | `/registraciya/ip/zakrytie/` | Лендинг |
| Заявление Р26001 | `/registraciya/ip/r26001/` | Лендинг |

#### 8.2 Регистрация ООО

| Страница | URL | Тип |
|----------|-----|-----|
| Как открыть ООО 2026 | `/registraciya/ooo/` | Хаб |
| Заявление Р11001 | `/registraciya/ooo/r11001/` | Лендинг |
| Р11001 образец | `/registraciya/ooo/r11001/obrazec/` | Инфо |
| Устав ООО | `/registraciya/ooo/ustav/` | Лендинг |
| Устав ООО типовой | `/registraciya/ooo/ustav/tipovoj/` | Инфо |
| Устав ООО образец 2026 | `/registraciya/ooo/ustav/obrazec/` | Инфо |
| Решение единственного учредителя | `/registraciya/ooo/reshenie/` | Лендинг |
| Протокол общего собрания | `/registraciya/ooo/protokol/` | Лендинг |
| Ликвидация ООО | `/registraciya/ooo/likvidaciya/` | Лендинг |

---

### 9. Деловая переписка

**Приоритет: СРЕДНИЙ**

| Страница | URL | Тип |
|----------|-----|-----|
| Деловые письма | `/pisma/` | Хаб |

#### 9.1 Коммерческие предложения

| Страница | URL | Тип |
|----------|-----|-----|
| Коммерческое предложение | `/pisma/kp/` | Хаб |
| КП для B2B | `/pisma/kp/b2b/` | Лендинг |
| КП для B2C | `/pisma/kp/b2c/` | Лендинг |
| КП для услуг | `/pisma/kp/uslugi/` | Лендинг |
| Образец КП | `/pisma/kp/obrazec/` | Инфо |

#### 9.2 Претензии

| Страница | URL | Тип |
|----------|-----|-----|
| Претензия | `/pisma/pretenziya/` | Хаб |
| Ответ на претензию | `/pisma/pretenziya/otvet/` | Лендинг |
| Образец претензии | `/pisma/pretenziya/obrazec/` | Инфо |

#### 9.3 Деловые письма

| Страница | URL | Тип |
|----------|-----|-----|
| Гарантийное письмо | `/pisma/garantijnoe/` | Хаб |
| Письмо-запрос | `/pisma/zapros/` | Хаб |
| Письмо-напоминание | `/pisma/napominanie/` | Хаб |
| Сопроводительное письмо | `/pisma/soprovoditelnoe/` | Хаб |
| Информационное письмо | `/pisma/informacionnoe/` | Хаб |

---

### 10. Складской учет

**Приоритет: СРЕДНИЙ**

| Страница | URL | Тип |
|----------|-----|-----|
| Складские документы | `/sklad/` | Хаб |
| Акт возврата | `/sklad/akt-vozvrata/` | Лендинг |
| Акт списания | `/sklad/akt-spisaniya/` | Лендинг |
| Накладная на перемещение | `/sklad/nakladnaya-peremeschenie/` | Лендинг |
| Инвентаризационная опись | `/sklad/inventarizacionnaya-opis/` | Лендинг |
| Акт инвентаризации | `/sklad/akt-inventarizacii/` | Лендинг |
| ТТН | `/sklad/ttn/` | Лендинг |
| Доверенность на ТМЦ | `/sklad/doverennost-tmc/` | Лендинг |

---

### 11. Прочие документы

**Приоритет: НИЗКИЙ**

| Страница | URL | Тип |
|----------|-----|-----|
| Инвойс (Invoice) | `/invoice/` | Хаб |
| Квитанция | `/kvitanciya/` | Хаб |
| Платежное требование | `/platezhnoe-trebovanie/` | Хаб |
| Доверенность | `/doverennost/` | Хаб |
| Доверенность на представление интересов | `/doverennost/predstavlenie-interesov/` | Лендинг |
| Акт приема-передачи документов | `/akt/priema-peredachi-dokumentov/` | Лендинг |
| Служебная записка | `/sluzhebnaya-zapiska/` | Хаб |
| Протокол разногласий | `/protokol-raznoglasij/` | Хаб |

---

### 12. Лендинги по сегментам

| Страница | URL | Тип |
|----------|-----|-----|
| Документы для ИП | `/dlya-ip/` | Хаб |
| Документы для ИП на УСН | `/dlya-ip/usn/` | Лендинг |
| Документы для ИП на ОСНО | `/dlya-ip/osno/` | Лендинг |
| Документы для ИП на патенте | `/dlya-ip/patent/` | Лендинг |
| Документы для ИП с работниками | `/dlya-ip/s-rabotnikami/` | Лендинг |
| Документы для ИП без работников | `/dlya-ip/bez-rabotnikov/` | Лендинг |
| Первичка для ИП | `/dlya-ip/pervichka/` | Лендинг |
| | | |
| Документы для ООО | `/dlya-ooo/` | Хаб |
| Документы для ООО на УСН | `/dlya-ooo/usn/` | Лендинг |
| Документы для ООО на ОСНО | `/dlya-ooo/osno/` | Лендинг |
| Документы для ООО с работниками | `/dlya-ooo/s-rabotnikami/` | Лендинг |
| Документы для ООО без работников | `/dlya-ooo/bez-rabotnikov/` | Лендинг |
| | | |
| Документы для самозанятых | `/dlya-samozanyatyh/` | Хаб |
| Документы для малого бизнеса | `/dlya-malogo-biznesa/` | Хаб |
| Документы для стартапов | `/dlya-startapov/` | Хаб |
| Документы для фрилансеров | `/dlya-frilanserov/` | Хаб |
| Документы для начинающих | `/dlya-nachinayuschih/` | Хаб |

---

### 13. Лендинги по отраслям

| Страница | URL | Тип |
|----------|-----|-----|
| Документы для IT | `/otrasli/it/` | Хаб |
| Документы для интернет-магазина | `/otrasli/internet-magazin/` | Хаб |
| Документы для маркетплейса | `/otrasli/marketplejs/` | Хаб |
| Документы для общепита | `/otrasli/obschepit/` | Хаб |
| Документы для салона красоты | `/otrasli/salon-krasoty/` | Хаб |
| Документы для строительства | `/otrasli/stroitelstvo/` | Хаб |
| Документы для грузоперевозок | `/otrasli/gruzoperevozki/` | Хаб |
| Документы для медицины | `/otrasli/medicina/` | Хаб |
| Документы для образования | `/otrasli/obrazovanie/` | Хаб |
| Документы для туризма | `/otrasli/turizm/` | Хаб |
| Документы для производства | `/otrasli/proizvodstvo/` | Хаб |
| Документы для торговли | `/otrasli/torgovlya/` | Хаб |

---

### 14. База знаний

| Страница | URL | Тип |
|----------|-----|-----|
| База знаний | `/baza-znanij/` | Хаб |
| Статьи по УПД | `/baza-znanij/upd/` | Хаб |
| Статьи по договорам | `/baza-znanij/dogovory/` | Хаб |
| Статьи по кадрам | `/baza-znanij/kadry/` | Хаб |
| Статьи по бухгалтерии | `/baza-znanij/buhgalteriya/` | Хаб |
| Статьи по налогам | `/baza-znanij/nalogi/` | Хаб |
| Статьи по самозанятым | `/baza-znanij/samozanyatye/` | Хаб |
| Статьи по регистрации | `/baza-znanij/registraciya/` | Хаб |
| Статьи по проверкам ФНС | `/baza-znanij/proverki/` | Хаб |
| Статьи по ЭДО | `/baza-znanij/edo/` | Хаб |

---

### 15. Блог

| Страница | URL | Тип |
|----------|-----|-----|
| Блог | `/blog/` | Хаб |

---

### 16. Сервисные страницы

| Страница | URL | Тип |
|----------|-----|-----|
| Тарифы | `/tarify/` | Инфо |
| О нас | `/o-nas/` | Инфо |
| Контакты | `/kontakty/` | Инфо |
| FAQ | `/faq/` | Инфо |
| Политика конфиденциальности | `/privacy-policy/` | Инфо |
| Пользовательское соглашение | `/terms/` | Инфо |
| Вход | `/login/` | Сервисная |
| Регистрация | `/register/` | Сервисная |
| Восстановление пароля | `/forgot-password/` | Сервисная |
| Подтверждение email | `/verify-email/` | Сервисная |

---

## Личный кабинет

### Структура URL личного кабинета

Все страницы личного кабинета имеют префикс `/dashboard/`.

| Страница | URL | Описание |
|----------|-----|----------|
| Главная ЛК | `/dashboard/` | Дашборд со статистикой |
| | | |
| **Документы** | | |
| Мои документы | `/dashboard/documents/` | Список созданных документов |
| | | |
| **Генераторы** | | |
| Генератор УПД | `/dashboard/upd/create/` | Создание УПД |
| Редактор УПД | `/dashboard/upd/edit/{id}/` | Редактирование УПД |
| Генератор счета | `/dashboard/schet/create/` | Создание счета |
| Генератор акта | `/dashboard/akt/create/` | Создание акта |
| Генератор счет-фактуры | `/dashboard/schet-faktura/create/` | Создание счет-фактуры |
| Генератор накладной | `/dashboard/nakladnaya/create/` | Создание накладной |
| Генератор договора | `/dashboard/dogovor/create/` | Создание договора |
| Генератор КУДиР | `/dashboard/kudir/create/` | Создание КУДиР |
| | | |
| **Справочники** | | |
| Мои организации | `/dashboard/organizations/` | Список организаций |
| Добавить организацию | `/dashboard/organizations/create/` | Создание организации |
| Редактировать организацию | `/dashboard/organizations/edit/{id}/` | Редактирование |
| Мои контрагенты | `/dashboard/contractors/` | Список контрагентов |
| Добавить контрагента | `/dashboard/contractors/create/` | Создание контрагента |
| Мои товары/услуги | `/dashboard/products/` | Каталог товаров/услуг |
| Добавить товар/услугу | `/dashboard/products/create/` | Создание товара |
| | | |
| **Шаблоны** | | |
| Мои шаблоны | `/dashboard/templates/` | Сохраненные шаблоны |
| | | |
| **Настройки** | | |
| Профиль | `/dashboard/settings/` | Настройки профиля |
| Безопасность | `/dashboard/settings/security/` | Смена пароля |
| Подписка | `/dashboard/settings/subscription/` | Тариф и оплата |

---

## Структура файлов

### Структура проекта

```
/opt/beget/documatica/
├── backend/
│   ├── app/
│   │   ├── __init__.py
│   │   ├── main.py                 # FastAPI app
│   │   ├── config.py               # Настройки
│   │   ├── database.py             # Подключение к БД
│   │   ├── models.py               # SQLAlchemy модели
│   │   │
│   │   ├── api/                    # REST API endpoints
│   │   │   ├── __init__.py
│   │   │   ├── auth.py
│   │   │   ├── documents.py
│   │   │   ├── organizations.py
│   │   │   ├── contractors.py
│   │   │   ├── products.py
│   │   │   └── dadata.py
│   │   │
│   │   ├── pages/                  # SSR — Публичные страницы
│   │   │   ├── __init__.py
│   │   │   ├── home.py             # GET /
│   │   │   ├── upd.py              # GET /upd/, /upd/ooo/, ...
│   │   │   ├── schet.py            # GET /schet/, /schet/ip/, ...
│   │   │   ├── dogovor.py          # GET /dogovor/...
│   │   │   ├── kadry.py            # GET /kadry/...
│   │   │   ├── buhgalteriya.py     # GET /buhgalteriya/...
│   │   │   ├── nalogovaya.py       # GET /nalogovaya/...
│   │   │   ├── samozanyatye.py     # GET /samozanyatye/...
│   │   │   ├── registraciya.py     # GET /registraciya/...
│   │   │   ├── pisma.py            # GET /pisma/...
│   │   │   ├── sklad.py            # GET /sklad/...
│   │   │   ├── segmenty.py         # GET /dlya-ip/, /dlya-ooo/, ...
│   │   │   ├── otrasli.py          # GET /otrasli/...
│   │   │   ├── baza_znanij.py      # GET /baza-znanij/...
│   │   │   ├── blog.py             # GET /blog/...
│   │   │   ├── auth_pages.py       # GET /login/, /register/, ...
│   │   │   └── static_pages.py     # GET /tarify/, /o-nas/, ...
│   │   │
│   │   ├── dashboard/              # SSR — Личный кабинет
│   │   │   ├── __init__.py
│   │   │   ├── main.py             # GET /dashboard/
│   │   │   ├── documents.py        # GET /dashboard/documents/
│   │   │   ├── upd.py              # GET /dashboard/upd/create/
│   │   │   ├── schet.py            # GET /dashboard/schet/create/
│   │   │   ├── organizations.py    # GET /dashboard/organizations/
│   │   │   ├── contractors.py      # GET /dashboard/contractors/
│   │   │   ├── products.py         # GET /dashboard/products/
│   │   │   ├── templates.py        # GET /dashboard/templates/
│   │   │   └── settings.py         # GET /dashboard/settings/
│   │   │
│   │   ├── schemas/                # Pydantic schemas
│   │   │   └── ...
│   │   │
│   │   ├── services/               # Бизнес-логика
│   │   │   ├── document_generator.py
│   │   │   ├── pdf_generator.py
│   │   │   ├── email.py
│   │   │   └── ...
│   │   │
│   │   └── templates/              # Jinja2 шаблоны
│   │       ├── base.html                   # Базовый layout
│   │       ├── base_public.html            # Layout публичной части
│   │       ├── base_dashboard.html         # Layout ЛК
│   │       │
│   │       ├── components/                 # Компоненты
│   │       │   ├── header.html
│   │       │   ├── footer.html
│   │       │   ├── sidebar.html
│   │       │   ├── breadcrumbs.html
│   │       │   ├── seo_block.html
│   │       │   ├── cta_block.html
│   │       │   ├── faq_block.html
│   │       │   └── features_block.html
│   │       │
│   │       ├── public/                     # Публичные страницы
│   │       │   ├── home.html
│   │       │   ├── upd/
│   │       │   │   ├── _base.html          # Базовый layout для UPD
│   │       │   │   ├── index.html          # /upd/
│   │       │   │   ├── ooo.html            # /upd/ooo/
│   │       │   │   ├── ip.html             # /upd/ip/
│   │       │   │   └── ...
│   │       │   ├── schet/
│   │       │   │   ├── _base.html
│   │       │   │   ├── index.html
│   │       │   │   └── ...
│   │       │   ├── dogovor/
│   │       │   │   ├── _base.html
│   │       │   │   ├── index.html
│   │       │   │   ├── okazaniya-uslug/
│   │       │   │   │   ├── index.html
│   │       │   │   │   ├── ip.html
│   │       │   │   │   └── ...
│   │       │   │   └── ...
│   │       │   └── ...
│   │       │
│   │       ├── dashboard/                  # Личный кабинет
│   │       │   ├── index.html
│   │       │   ├── documents/
│   │       │   │   ├── index.html
│   │       │   │   └── ...
│   │       │   ├── upd/
│   │       │   │   ├── create.html
│   │       │   │   └── edit.html
│   │       │   ├── organizations/
│   │       │   │   ├── index.html
│   │       │   │   ├── create.html
│   │       │   │   └── edit.html
│   │       │   └── ...
│   │       │
│   │       ├── auth/                       # Авторизация
│   │       │   ├── login.html
│   │       │   ├── register.html
│   │       │   ├── forgot-password.html
│   │       │   └── verify-email.html
│   │       │
│   │       ├── errors/                     # Страницы ошибок
│   │       │   ├── 404.html
│   │       │   ├── 500.html
│   │       │   └── 403.html
│   │       │
│   │       └── documents/                  # Шаблоны документов (для PDF)
│   │           ├── upd.html
│   │           ├── schet.html
│   │           └── ...
│   │
│   ├── static/                     # Статика
│   │   ├── css/
│   │   ├── js/
│   │   ├── images/
│   │   └── fonts/
│   │
│   ├── content/                    # YAML-контент для страниц
│   │   ├── upd/
│   │   │   ├── index.yaml
│   │   │   ├── ooo.yaml
│   │   │   ├── ip.yaml
│   │   │   └── ...
│   │   ├── schet/
│   │   │   └── ...
│   │   └── ...
│   │
│   ├── data/                       # JSON-файлы (legacy)
│   ├── documents/                  # Сгенерированные документы
│   │
│   ├── requirements.txt
│   ├── Dockerfile
│   └── README.md
│
├── docs/                           # Документация
│   └── site-structure.md
│
├── docker-compose.yml
└── docker-compose.prod.yml
```

### Пример YAML-контента

```yaml
# content/upd/ooo.yaml
meta:
  title: "УПД для ООО — онлайн генератор 2026"
  description: "Создайте УПД для ООО бесплатно. Автоматическое заполнение реквизитов, соответствие форме 2026 года. Скачайте в PDF или отправьте по ЭДО."
  keywords: "упд для ооо, упд ооо онлайн, генератор упд для ооо"
  canonical: "/upd/ooo/"

page:
  h1: "Генератор УПД для ООО"
  intro: |
    Создайте универсальный передаточный документ для вашей организации 
    за 2 минуты. Автоматическое заполнение реквизитов по ИНН.

features:
  - title: "Автозаполнение по ИНН"
    description: "Введите ИНН — мы подтянем все реквизиты из ЕГРЮЛ"
    icon: "search"
  - title: "Актуальная форма 2026"
    description: "Соответствует требованиям ПП РФ № 1137"
    icon: "check-circle"
  - title: "Экспорт в PDF и XML"
    description: "Скачайте для печати или отправьте через ЭДО"
    icon: "download"

faq:
  - question: "Обязательно ли ООО использовать УПД?"
    answer: "УПД не обязателен, но удобен — заменяет счет-фактуру и товарную накладную..."
  - question: "Чем УПД отличается от ТОРГ-12?"
    answer: "УПД объединяет счет-фактуру и первичный документ..."

cta:
  text: "Создать УПД для ООО"
  url: "/dashboard/upd/create/?preset=ooo"

related:
  - title: "УПД для ИП"
    url: "/upd/ip/"
  - title: "УПД с НДС"
    url: "/upd/s-nds/"
  - title: "Образец заполнения УПД"
    url: "/upd/obrazec/"
```

---

## План миграции

### Этап 0: Подготовка (1-2 дня)

- [ ] Создать структуру папок `pages/`, `dashboard/`, `templates/`
- [ ] Настроить Jinja2 в FastAPI
- [ ] Создать базовые layouts (`base.html`, `base_public.html`, `base_dashboard.html`)
- [ ] Перенести статику (CSS, JS, images)

### Этап 1: Компоненты (2-3 дня)

- [ ] Создать компонент `header.html`
- [ ] Создать компонент `footer.html`
- [ ] Создать компонент `sidebar.html` (для ЛК)
- [ ] Создать компонент `breadcrumbs.html`
- [ ] Создать компонент `cta_block.html`
- [ ] Создать компонент `faq_block.html`

### Этап 2: Миграция публичных страниц УПД (3-5 дней)

- [ ] Создать роутер `pages/upd.py`
- [ ] Мигрировать `upd-create.html` → `templates/public/upd/index.html`
- [ ] Мигрировать `upd-dlya-ooo.html` → `templates/public/upd/ooo.html`
- [ ] Мигрировать `upd-dlya-ip.html` → `templates/public/upd/ip.html`
- [ ] Мигрировать остальные UPD-страницы
- [ ] Создать YAML-контент для каждой страницы
- [ ] Настроить редиректы со старых URL

### Этап 3: Миграция личного кабинета (3-5 дней)

- [ ] Создать роутер `dashboard/main.py`
- [ ] Мигрировать `dashboard.html` → `templates/dashboard/index.html`
- [ ] Мигрировать `upd-create.html` (генератор) → `templates/dashboard/upd/create.html`
- [ ] Мигрировать справочники (organizations, contractors, products)
- [ ] Настроить проверку авторизации

### Этап 4: Миграция остальных страниц (по мере разработки)

- [ ] Страницы авторизации
- [ ] Сервисные страницы (тарифы, о нас, контакты)
- [ ] Новые типы документов

### Этап 5: Оптимизация

- [ ] Настроить кэширование шаблонов
- [ ] Настроить сжатие статики
- [ ] Оптимизировать загрузку YAML-контента

---

## Приоритеты разработки

### Этап 1: MVP (КРИТИЧЕСКИЙ)

1. **Миграция на SSR** — базовая инфраструктура
2. **УПД** — хаб + все лендинги + генератор в ЛК
3. **Счет на оплату** — хаб + лендинги + генератор
4. **Акт выполненных работ** — хаб + генератор
5. **Авторизация** — вход, регистрация, восстановление
6. **Личный кабинет** — дашборд, документы, справочники

### Этап 2: ВЫСОКИЙ приоритет

1. Счет-фактура
2. Товарная накладная ТОРГ-12
3. Акт сверки
4. Договор оказания услуг
5. Договор подряда
6. Договор с самозанятым
7. Трудовой договор
8. ГПХ
9. КУДиР
10. Письмо в налоговую
11. Самозанятые — хаб и все документы

### Этап 3: СРЕДНИЙ приоритет

1. Остальные договоры
2. Кадровые приказы
3. Штатное расписание, Табель
4. Регистрация ИП/ООО
5. Кассовые документы
6. Коммерческое предложение
7. Претензии
8. Лендинги по сегментам
9. Лендинги по отраслям

### Этап 4: НИЗКИЙ приоритет

1. Складские документы
2. Инвойс, Квитанция
3. Доверенности
4. Служебные записки
5. База знаний
6. Блог

---

## Итоговая статистика

| Раздел | Количество страниц |
|--------|-------------------|
| УПД и первичка | ~45 |
| Договоры | ~35 |
| Кадровые документы | ~25 |
| Бухгалтерия | ~15 |
| Налоговые документы | ~12 |
| Самозанятые | ~8 |
| Регистрация бизнеса | ~15 |
| Деловая переписка | ~15 |
| Складской учет | ~8 |
| Прочие документы | ~8 |
| Лендинги по сегментам | ~15 |
| Лендинги по отраслям | ~12 |
| База знаний | ~50+ |
| Сервисные страницы | ~10 |
| Личный кабинет | ~20 |
| **ИТОГО публичная часть** | **~250-280 страниц** |
| **ИТОГО с ЛК** | **~300 страниц** |

---

## Примечания

1. **SEO-лендинги** — публичные страницы с информацией и CTA на регистрацию/вход
2. **Генераторы** — только в личном кабинете после авторизации
3. **CTA на лендингах** — ведут на `/dashboard/{тип}/create/?preset={модификатор}`
4. **Preset-параметры** — автоматически заполняют форму генератора (НДС, тип организации и т.д.)
5. **YAML-контент** — позволяет SEO-специалисту редактировать тексты без разработчика
6. **Breadcrumbs** — автоматически генерируются из иерархии URL
