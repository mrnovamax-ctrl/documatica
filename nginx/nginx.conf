server {
    listen 80;
    server_name new.oplatanalogov.ru;

    root /usr/share/nginx/html;
    index index.html;

    # Редирект /index на корень /
    location = /index {
        return 301 https://$host/;
    }

    # Поддержка URL без .html
    location / {
        try_files $uri $uri.html $uri/ /index.html;
    }

    # Редирект с .html на чистый URL (https)
    location ~ ^(.*)\.html$ {
        return 301 https://$host$1;
    }

    # Gzip
    gzip on;
    gzip_types text/plain text/css application/json application/javascript text/xml application/xml;
}
