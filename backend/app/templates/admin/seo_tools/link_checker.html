{% extends "admin/base_admin.html" %}

{% block title %}Проверка ссылок{% endblock %}
{% block page_title %}Битые внутренние ссылки{% endblock %}

{% block header_actions %}
<a href="/admin/seo-tools/" class="btn btn-ghost btn-sm">Назад</a>
{% endblock %}

{% block content %}
{% if broken %}
<div class="admin-alert admin-alert-warning" style="margin-bottom: 1.5rem;">Найдено {{ broken|length }} битых ссылок.</div>
<div class="admin-table-container">
  <div class="admin-table-header" style="grid-template-columns: 1fr 2fr 120px;">
    <div class="admin-table-th">Статья</div>
    <div class="admin-table-th">Битый URL</div>
    <div class="admin-table-th"></div>
  </div>
  {% for b in broken %}
  <div class="admin-table-row" style="grid-template-columns: 1fr 2fr 120px;">
    <div class="admin-table-cell">
      <a href="/admin/articles/{{ b.article_id }}/">{{ b.article_title[:60] }}{% if b.article_title|length > 60 %}...{% endif %}</a>
    </div>
    <div class="admin-table-cell" style="font-family: monospace; color: #ef4444;">{{ b.broken_url }}</div>
    <div class="admin-table-cell">
      <a href="/admin/articles/{{ b.article_id }}/" class="btn btn-outline btn-sm">Редактировать</a>
    </div>
  </div>
  {% endfor %}
</div>
{% else %}
<div class="admin-alert admin-alert-success">Битых внутренних ссылок не найдено.</div>
{% endif %}
{% endblock %}
