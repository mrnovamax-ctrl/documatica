{% extends "admin/base_admin.html" %}

{% block title %}Создать страницу{% endblock %}
{% block page_title %}Создать страницу{% endblock %}

{% block content %}
<div class="admin-core">
  <div class="form-card form-card--standalone form-card--narrow">
    {% if error %}
    <div class="form-error">{{ error }}</div>
    {% endif %}

    <form method="post" action="/admin/pages/create/">
      <div class="form-group">
        <label class="label" for="parent_id">Родительская страница</label>
        <select id="parent_id" name="parent_id" class="input">
          <option value="">— Корневая (главная раздела, например /upd/) —</option>
          {% for p in (parent_pages | default([])) %}
          <option value="{{ p.id }}" {% if (form_parent_id | default(None)) == p.id %}selected{% endif %}>/{{ p.slug }}/ — {{ p.title }}</option>
          {% endfor %}
        </select>
        <p class="form-hint">Если выбрана родительская страница, ниже укажите один сегмент (например <strong>ooo</strong>). Итог: /<strong>родитель/сегмент</strong>/</p>
      </div>
      <div class="form-group">
        <label class="label" for="slug">URL (сегмент или полный путь)</label>
        <input type="text" id="slug" name="slug" class="input" placeholder="ooo или upd" required value="{{ form_slug | default('') }}">
        <p class="form-hint">Без родителя: полный путь (например <strong>upd</strong> → /upd/). С родителем: один сегмент (например <strong>ooo</strong> → /upd/ooo/). Латиница, цифры, дефис.</p>
      </div>
      <div class="form-group">
        <label class="label" for="title">Название страницы</label>
        <input type="text" id="title" name="title" class="input" placeholder="О компании" required value="{{ form_title | default('') }}">
      </div>
      <div class="form-group">
        <label class="label" for="page_type">Тип страницы</label>
        <select id="page_type" name="page_type" class="input">
          <option value="custom" {% if (form_page_type | default('custom')) == 'custom' %}selected{% endif %}>Обычная (custom)</option>
          <option value="home" {% if (form_page_type | default('')) == 'home' %}selected{% endif %}>Главная</option>
          <option value="service" {% if (form_page_type | default('')) == 'service' %}selected{% endif %}>Услуга</option>
          <option value="blog" {% if (form_page_type | default('')) == 'blog' %}selected{% endif %}>Блог</option>
        </select>
      </div>
      <div class="form-actions">
        <button type="submit" class="btn btn-primary">
          <iconify-icon icon="ri:add-line" width="18"></iconify-icon>
          Создать и перейти в редактор
        </button>
        <a href="/admin/pages/" class="btn btn-outline">Отмена</a>
      </div>
    </form>
  </div>
</div>
{% endblock %}
